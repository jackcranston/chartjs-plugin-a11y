!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).ChartjsPluginA11y=e()}(this,(function(){"use strict";var t={currentState:{datasetIndex:0,index:0},get(){return this.currentState},set(t){this.currentState=t},compare(t){const e=this.currentState.datasetIndex===t.datasetIndex,a=this.currentState.index===t.index;return e&&a}};const e=(e,a,s)=>{e.setActiveElements([{datasetIndex:a,index:s}]),e.tooltip.setActiveElements([{datasetIndex:a,index:s}]),t.set({datasetIndex:a,index:s})},a=(t,e)=>(e===t.config.data.datasets.length-1?e=0:e+=1,t.isDatasetVisible(e)?e:a(t,e)),s=(t,e)=>(0===e?e=t.config.data.datasets.length-1:e-=1,t.isDatasetVisible(e)?e:s(t,e)),n=(t,e)=>{const{canvas:a}=t;a.setAttribute("role","image"),a.setAttribute("tabindex","0"),a.setAttribute("aria-label",e.chartLabel||`${t.config._config.type} chart`),a.setAttribute("aria-describedby","chartjs-a11y-label"),a.addEventListener("keydown",(t=>{const{key:e}=t;"ArrowLeft"!==e&&"ArrowRight"!==e&&"ArrowUp"!==e&&"ArrowDown"!==e||t.preventDefault()})),document.getElementById("chartjs-a11y-label")||(()=>{const t=document.createElement("div");t.setAttribute("id","chartjs-a11y-label"),t.setAttribute("tabindex","-1"),t.setAttribute("role","status"),t.style.cssText="position: absolute; left: -10000px; width: 1px; height: 1px; overflow: hidden;",document.body.appendChild(t)})()},i=(n,i)=>{const{key:d}=n.native,{datasetIndex:o,index:r}=t.get(),l=i.config._config.data.datasets[o],c=i.config._config.data.datasets.length;"ArrowRight"===d?((t,s,n,i,d)=>{if(t.isDatasetVisible(s))if(n===i.data.length-1&&s===d-1)e(t,0,0);else if(n!==i.data.length-1||t.isDatasetVisible(s+1))n<i.data.length-1?e(t,s,n+1):e(t,d>1&&s<d-1?s+1:s,0);else{const n=a(t,s);e(t,n,0)}else{const n=a(t,s);e(t,n,0)}})(i,o,r,l,c):"ArrowLeft"===d?((t,a,n,i,d)=>{if(t.isDatasetVisible(a))if(0===n&&0===a)e(t,d-1,i.data.length-1);else if(0!==n||t.isDatasetVisible(a-1))if(n>0)e(t,a,n-1);else if(d>1&&a>0){const s=t.config.data.datasets[a-1];e(t,a-1,s.data.length-1)}else e(t,a,i.data.length-1);else{const n=s(t,a),i=t.config.data.datasets[n];e(t,n,i.data.length-1)}else{const n=s(t,a),i=t.config.data.datasets[n];e(t,n,i.data.length-1)}})(i,o,r,l,c):"ArrowUp"===d?((t,a,n)=>{const i=s(t,a);e(t,i,n)})(i,o,r):"ArrowDown"===d&&((t,s,n)=>{const i=a(t,s);e(t,i,n)})(i,o,r)};return{id:"chartjsPluginA11y",start:(a,s,i)=>{a.canvas.addEventListener("focus",(()=>(a=>{if(!t.get()){const s=0,n=0;t.set({datasetIndex:s,index:n}),e(a,s,n)}})(a))),n(a,i)},beforeEvent:(e,a,s)=>{const{event:n}=a;if("keydown"===n.type)i(n,e);else{(e=>{(e&&!t.get()||e&&!t.compare(e))&&t.set(e)})(e.getElementsAtEventForMode(n,"index",{intersect:!0},!0)[0])}(e=>{const{datasetIndex:a,index:s}=t.get(),n=e.config.data.datasets[a].label,i=e.config.data.labels[s],d=e.config.data.datasets[a].data[s];document.getElementById("chartjs-a11y-label").textContent=`${i}, ${n},  ${d}`})(e)}}}));
